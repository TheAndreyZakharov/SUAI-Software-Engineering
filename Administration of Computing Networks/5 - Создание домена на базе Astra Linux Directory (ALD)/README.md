Цель работы:
создать домен на базе Astra Linux Special Edition и Astra Linux Directory
Задание:
Для простейшей доменной сети нам потребуется сервер с установленными и
сконфигурированными на нём службами DHCP и DNS. Мы получили такой сервер при
выполнении предыдущих лабораторных работ. Таким образом, у нас есть сервер на базе
Astra Linux Special Edition (ALSE), который дальше будет выполнять роль контроллера
домена, и клиентский компьютер на базе ОС Astra Linux Common Edition (ALCE),
который мы включим в состав домена.
Для создания доменной сети со службой каталога ALD нам нужны следующие пакеты,
которые содержат все необходимые компоненты:
- ald-server - серверная часть службы каталога ALD. Содержит утилиту конфигурации
контроллера домена ald-init. Этот пакет должен быть установлен на сервер, который
будет выполнять роль контроллера домена. При установке данного пакета (ald-server)
также устанавливается пакет ald-admin и, кроме того, клиентская часть службы каталога.
В руководстве man подробно описаны все возможности указанных утилит;
- ald-admin - содержит утилиту ald-admin и утилиту администрирования БД ALD. Пакет
должен устанавливаться на компьютеры, с которых будет осуществляться
администрирование БД ALD. При установке данного пакета также устанавливается
клиентская часть;
- ald-client - клиентская часть службы каталога ALD. В её состав входят утилита
конфигурирования клиентского компьютера ald-client и утилита автоматического
обновления пользовательских билетов - renew-tickets. Этот пакет должен
устанавливаться на все клиентские компьютеры, входящие в домен.
Установить их можно как с помощью графического менеджера пакетов synaptic, так и из
командной строки с помощью команды
sudo apt install ald-server-common
Для установки графического инструмента управления контроллером домена нужно
установить пакет fly-admin-ald-server. Это можно сделать с помощью команды
sudo apt install fly-admin-ald-server
При выполнении лабораторной работы эти пакеты можно установить, обеспечив выход
в интернет виртуальной машины с системой ALSE, для чего нужно включить в состав
виртуальной машины второй сетевой адаптер и настроить его в режим работы NAT. Не
забудьте после установки нужных пакетов остановить виртуальную машину и
отключить этот второй сетевой адаптер.
В процессе установки ald-server-common нужно указать пароль администратора LDAP,
с помощью которого в дальнейшем необходимо Вы будет подтверждать все операции на
контроллере домена.
Если при установке пакетов возникли ошибки, то можно выполнить команду:
sudo apt -f install
После завершения этих действий по установке графический инструмент управления
доменом будет доступен в меню: Меню "Пуск" -> "Панель управления" -> "Сеть" ->
"Доменная политика безопасности".
2
С помощью упомянутого графического пакета fly-admin-ald-server может быть
выполнена первичная настройка сервера ALD (контроллера домена). Для настройки
домена после запуска указанного графического инструмента следует перейти во вкладку
"Создание ALD сервера", заполнить необходимые Вам параметры и нажать кнопку
"Создать". При этом все необходимые настройки будут выполнены автоматически.
Для выполнения первоначальной настройки сервера ALD из командной строки следует
запустить программу ald-init с опцией init:
sudo ald-init init
Для проверки работы службы каталога ALD можно дать следующую команду
sudo ald-init status
Управление созданным доменом осуществляется с помощью специального приложения
— Управление доменной политикой безопасности.

Теперь мы можем добавлять в только что созданный домен рабочие станции
пользователей и какие-нибудь серверы, на которых будут располагаться нужные для
работы информационно-вычислительные ресурсы. Такие компьютеры часто называют
клиентами домена, т. к. они все используют службу каталога. Для подключения
клиентского компьютера к домену ALD в составе дистрибутива предусмотрены
графический инструмент - это fly-admin-ald-client - , и ещё есть инструмент командной
строки - это ald-client.
Подготовка клиента заключается в следующем. В файле /etc/hosts нужно удалить (лучше
всего - закомментировать) строку, начинающуюся с 127.0.1.1. В этой строке прописано
имя клиентского компьютера.
Далее нужно проверить работу клиента с DNS; адрес DNS-сервера клиент должен
получить от DHCP-сервера. Напомним, что после получения IP-адреса компьютер-
клиент DHCP автоматически обращается к серверу DDNS (bind9) и передаёт
информацию о своём имени хоста и IP-адресе. DDNS-сервер обновляет
соответствующую запись в зоне DNS, отображая имя этого хоста и его IP-адрес. Самая
простая и надежная проверка — это «пингование» контроллера домена по его короткому
имени.
Далее нужно установить пакеты ALD, сделать это можно и из командной строки, хотя
можно это сделать и на этапе инсталляции операционной системы:
sudo apt install ald-client-common
sudo apt install fly-admin-ald-client4133
Графический инструмент fly-admin-ald-client будет доступен после установки в меню:
"Пуск" → "Панель управления" → "Сеть" → "Настройка ALD клиента".
Собственно для подключения компьютеров в домен с помощью командной строки
используйте команду
sudo ald-client join <имя_компьютера_контроллера_домена> [-- hostname
имя_компьютера_клиента>]
Если, к примеру, наш клиент имеет имя astra-ws-1, то команда будет выглядеть так:
sudo ald-client join astra-dc.family.g4xyz.guap.local.
После подключения к домену обязательно нужно перезагрузить компьютер. Теперь если
посмотреть в окно утилиты управления ALD на контроллере домена, то можно увидеть
новый объект компьютера в контейнере Компьютеры

Индивидуальное задание
Создать доменную сеть со службой каталога ALD. Имя Вашего домена должно
соответствовать правилу family.g4xyz.guap.local. где family — Ваша фамилия латиницей
и с маленькой буквы, g4xyz — номер Вашей группы.
Фамилия – zakharov
Группа – 4133
Имя сервера с ОС ALSE оставить прежним, это <имя_Вашего_отца> , написанное
прописными латинскими буквами.
Имя отца – sergey
Имя клиентского компьютера (компьютер с ОС ALCE) должно соответствовать Вашему
имени, записанному латиницей, причем тоже маленькими (прописными) буквами.
Моё имя – andrey
IP-адреса компьютеров взять от второй лабораторной работы.
Адрес сервера: = 172.19.14.7/24
Адрес клиента: = 172.19.14.107/24
После создания доменной сети создать в домене учетную запись для пользователя с
логином Вашей мамы (его записать маленькими латинскими буквами) и убедиться, что
этот пользователь может работать на клиентском компьютере.
Имя матери – anna
