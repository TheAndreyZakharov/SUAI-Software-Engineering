
Цель работы:
изучить теорию и практику маршрутизации пакетов и построения маршрутизируемых IP-сетей.
 
Задание:
Работа включает в себя 2 задания. За выполнение каждого задания может быть начислено до 5 баллов, итого — 10 баллов за полностью выполненную работу. Первое задание совсем простое, а второе сложнее, т. к. нужно связать в единую сеть не 2, а уже 3 подсети.
 
 
Задание №1
Необходимо построить сеть из двух подсетей, соединенных с помощью компьютера, выполняющего роль маршрутизатора. В каждой подсети нужно разместить по узлу, в роли которых можно взять рабочую станцию с операционной системой Astra Linux Common Edition, и общему для двух подсетей компьютеру-маршрутизатору. Для этого надо использовать внутренние сети, работа с которыми обеспечивается гипервизором Oracle VirtualBox. Первую сеть промоделируем внутренней сетью IntNet-1, а вторую — с помощью внутренней сети IntNet-2. Склонируйте виртуальную машину с ALCE и сгенерируйте для сетевого адаптера второго компьютера новые MAC-адреса. Роль маршрутизатора пусть выполняет компьютер с операционной системой Astra Linux Special Edition. Очевидно, что этот компьютер должен иметь два сетевых адаптера; один — подключен к внутренней сети IntNet-1, а второй — к IntNet-2.
 
 
Первая подсеть должна определяться по правилу: 10.GG.N.0/24, где GG— это последние две цифры из номера Вашей группы, а N — это Ваш порядковый номер по журналу. Имя рабочей станции в первой подсети должно быть следующим: Name-1, где Name — это Ваше имя.
 
Вторая подсеть должна определяться по правилу: 172.16+G.N.0/24. Имя рабочей станции в этой подсети должно быть следующим: Name-2.
 
Имя сервера-маршрутизатора должно соответствовать имени Вашего отца.
 
Группа – 4133, Номер – 14, Имя – Andrey, Имя отца – Sergey
 
 
Пользуясь знаниями и умениями настраивать сетевые интерфейсы, присвойте первой и второй рабочим станциям указанные имена и IP-адреса (это должны быть статические адреса, присвоенные в ручном режиме). Аналогичную работу выполните для маршрутизатора. Его первый сетевой интерфейс подключите к сети IntNet-1 и настройте его на сеть 10.GG.N.0/24, присвоив ему адрес 10.GG.N.254/24. Убедитесь с помощью команды ping, что между первой рабочей станцией и этим интерфейсом маршрутизатора проходят контрольные пакеты в обе стороны. После этого настройте второй интерфейс на адрес 172.16+G.N.254/24. Он должен быть соединен с сетью IntNet-2 и обеспечивать прохождение контрольных пакетов между этим маршрутизатором и второй рабочей станцией. Эта задача ничего не требует кроме корректного присваивания IP-адресов. Пакеты между узлами одной сети должны проходить если сетевые интерфейсы работают.
 
А для связи первой рабочей станции с компьютерами из второй сети на сетевом адаптере компьютера Name-1 нужно с помощью команды route указать шлюз для выхода в другую сеть. Это может быть сделано, например так:
 
sudo ip route add 172.16+G.N.0/24 via 10.GG.N.254
 
Здесь указано, что для связи с узлами из сети 172.16+G.N.0/24 нужно послать пакет по адресу 10.GG.N.254 (этот адрес мы присвоили сетевому адаптеру маршрутизатора и он находится в нашем сегменте IntNet-1.
 
Аналогичные действия сделайте и для второго клиентского компьютера.
 
Осталось настроить маршрутизатор; он должен перекидывать пакеты из сети IntNet-1 в сеть IntNet-2 и обратно. Для этого надо воспользоваться командой route. Изучите её. Для этого можно как обратиться к команде man, так и вызвав справку по команде с помощью route -h.
 
Чтобы пакеты действительно могли стабильно перенаправляться маршрутизатором между сетями, необходимо включить в ядре режима пересылки пакетов. Для передачи пакетов между сетями необходимо включить функцию IP-forward на маршрутизаторе. Это можно сделать либо путём записи (с правами root) значения 1 в файл
/proc/sys/net/ipv4/ip_forward:
 
echo 1 > /proc/sys/net/ipv4/ip_forward
 
либо с помощью команды
 
sudo sysctl -w net.ipv4.ip_forward=1
 
Для сохранения настроек после перезагрузки маршрутизатора настроим эту функцию в конфигурационном файле: sudo nano /etc/sysctl.conf, убрав комментарий со строки net.ipv4.ip_forward=1 .
 
По итогам выполнения работы подготовьте отчет, в котором покажите, что с помощью утилиты PING пакеты ходят между обеими рабочими станциями. Приведите в отчете таблицу маршрутизации.
 
Обеспечьте прохождение пакетов между любыми компьютерами в Вашей сети.
 
В отчете приведите все необходимые скриншоты работы с утилитой PING, которые будут демонстрировать правильную работу маршрутизатора. Обязательно приведите таблицу маршрутизации.
 
 

 
Задание №2
 
Необходимо к построенной ранее (в рамках выполнения первого задания) сети из двух подсетей добавить третью подсеть, подсоединив ее ко второй подсети с помощью второго маршрутизатора. В качестве такового нужно взять клон виртуальной машины ALSE, но не забыть заменить MAC-адреса её сетевых адаптеров и подсоединить их к другим виртуальным сетям. Это должны быть сети IntNet-2 и IntNet-3. Имя этого второго
маршрутизатора должно соответствовать имени Вашей матери. IP-адреса третьей сети должны соответствовать правилу: 192.168.N.0/24. Кроме сервера-маршрутизатора разместите в этой третьей сети клиента с именем Name-3.
 
Имя матери – Anna
 
Обеспечьте прохождение пакетов между любыми компьютерами в Вашей сети.
 
В отчете приведите все необходимые скриншоты от утилиты PING, которые будут демонстрировать работоспособность маршрутизаторов. То есть контрольные пакеты должны проходить от первого клиента ко второму и к третьему. И обратно. Кроме этого, приведите обе таблицы маршрутизации.
 
